import React from 'react';

interface ProfilePicUploadProps {
  setValue: (value: string) => void;
}

const ProfilePicUpload: React.FC<ProfilePicUploadProps> = ({ setValue }) => {
  const [selectedImage, setSelectedImage] = React.useState<File | null>(null);

  React.useEffect(() => {
    if (selectedImage !== null) {
      setValue(URL.createObjectURL(selectedImage));
    }
  }, [selectedImage, setValue]);

  return (
    <>
      <div className="mb-2 w-24 h-24">
        {selectedImage === null && (
          <svg
            onClick={() => {
              document.getElementById('file-upload')?.click();
            }}
            className="cursor-pointer object-cover rounded-full"
            viewBox="0 0 91 90"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_9_7251)">
              <path
                d="M40.2199 88.628C39.676 88.5571 39.1772 88.9375 39.1005 89.4793C35.8277 88.9781 32.6711 88.1244 29.6705 86.9581C29.8746 86.4504 29.6323 85.8718 29.1256 85.6617C25.5491 84.1785 22.2101 82.237 19.1821 79.9101C18.7471 79.5758 18.1247 79.6547 17.7866 80.0849C15.2439 78.0399 12.9281 75.7241 10.8831 73.1814C11.3134 72.8433 11.3922 72.2209 11.058 71.786C8.73104 68.7579 6.7895 65.4189 5.30637 61.8424C5.09624 61.3357 4.51764 61.0935 4.00994 61.2975C2.84362 58.2969 1.98989 55.1403 1.48873 51.8675C2.03053 51.7908 2.41092 51.292 2.33997 50.7481C2.09463 48.8672 1.96802 46.9487 1.96802 45C1.96802 43.0513 2.09463 41.1328 2.33997 39.2519C2.41093 38.708 2.03053 38.2092 1.48873 38.1325C1.98989 34.8597 2.84362 31.7031 4.00994 28.7025C4.51764 28.9065 5.09624 28.6643 5.30637 28.1576C6.7895 24.5811 8.73104 21.2421 11.058 18.214C11.3922 17.7791 11.3134 17.1567 10.8831 16.8186C12.9281 14.2759 15.2439 11.9601 17.7866 9.91509C18.1247 10.3453 18.7471 10.4242 19.1821 10.0899C22.2101 7.76302 25.5491 5.82148 29.1256 4.33835C29.6323 4.12822 29.8746 3.54962 29.6705 3.04192C32.6711 1.8756 35.8277 1.02187 39.1005 0.520713C39.1772 1.06251 39.676 1.44291 40.22 1.37195C42.1008 1.12661 44.0194 1 45.968 1C47.9167 1 49.8353 1.12661 51.7161 1.37195C52.2601 1.44291 52.7589 1.06251 52.8355 0.520714C56.1083 1.02187 59.2649 1.8756 62.2655 3.04193C62.0615 3.54962 62.3037 4.12823 62.8104 4.33835C66.387 5.82149 69.7259 7.76302 72.754 10.0899C73.189 10.4242 73.8113 10.3454 74.1494 9.91509C76.6922 11.9601 79.0079 14.2759 81.0529 16.8186C80.6227 17.1567 80.5438 17.7791 80.8781 18.214C83.205 21.2421 85.1465 24.5811 86.6297 28.1576C86.8398 28.6643 87.4184 28.9065 87.9261 28.7025C89.0924 31.7031 89.9461 34.8597 90.4473 38.1325C89.9055 38.2092 89.5251 38.708 89.5961 39.2519C89.8414 41.1328 89.968 43.0513 89.968 45C89.968 46.9487 89.8414 48.8672 89.5961 50.7481C89.5251 51.292 89.9055 51.7908 90.4473 51.8675C89.9461 55.1403 89.0924 58.2969 87.9261 61.2975C87.4184 61.0935 86.8398 61.3357 86.6297 61.8424C85.1465 65.4189 83.205 68.7579 80.8781 71.786C80.5438 72.2209 80.6227 72.8433 81.0529 73.1814C79.0079 75.7241 76.6922 78.0399 74.1494 80.0849C73.8113 79.6546 73.189 79.5758 72.754 79.9101C69.7259 82.237 66.387 84.1785 62.8104 85.6617C62.3037 85.8718 62.0615 86.4504 62.2655 86.9581C59.2649 88.1244 56.1083 88.9781 52.8355 89.4793C52.7588 88.9375 52.2601 88.5571 51.7161 88.6281C49.8353 88.8734 47.9167 89 45.968 89C44.0194 89 42.1008 88.8734 40.2199 88.628Z"
                stroke="#50555C"
                strokeWidth="2"
                strokeLinecap="round"
                strokeDasharray="11"
              />
              <g clipPath="url(#clip1_9_7251)">
                <path
                  d="M62.968 55.7273C62.968 57.4343 61.5842 58.8182 59.8771 58.8182H32.0589C30.3519 58.8182 28.968 57.4343 28.968 55.7273V38.7273C28.968 37.0202 30.3519 35.6364 32.0589 35.6364H38.2407L41.3317 31H50.6044L53.6953 35.6364H59.8771C61.5842 35.6364 62.968 37.0202 62.968 38.7273V55.7273Z"
                  stroke="#50555C"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M52.9897 46.287C52.9897 50.165 49.846 53.3088 45.9679 53.3088C42.0898 53.3088 38.946 50.165 38.946 46.287C38.946 42.4089 42.0898 39.2651 45.9679 39.2651C49.846 39.2651 52.9897 42.4089 52.9897 46.287Z"
                  stroke="#50555C"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </g>
            </g>
            <defs>
              <clipPath id="clip0_9_7251">
                <rect
                  width="90"
                  height="90"
                  fill="white"
                  transform="translate(0.968018)"
                />
              </clipPath>
              <clipPath id="clip1_9_7251">
                <rect
                  width="34"
                  height="27.8182"
                  fill="white"
                  transform="translate(28.968 31)"
                />
              </clipPath>
            </defs>
          </svg>
        )}
        {selectedImage !== null && (
          <img
            src={URL.createObjectURL(selectedImage)}
            alt="profile-pic"
            className="object-cover w-24 h-24 rounded-full ring-1 ring-black"
          />
        )}
      </div>

      <input
        id='file-upload'
        className="invisible"
        type="file"
        name="myImage"
        onChange={(event) => {
          if (!event.target.files) return;
          setSelectedImage(event.target.files[0]);
        }}
      />
    </>
  );
};

export default ProfilePicUpload;
